components:
  schemas:
    RegisterRequest:
      type: object
      required:
        - email
        - password
        - firstName
        - lastName
        - firmName
      properties:
        email:
          type: string
          format: email
          description: User email address
          example: john.doe@lawfirm.com
        password:
          type: string
          format: password
          minLength: 12
          description: Password (min 12 characters, must include uppercase, lowercase, number, and special character)
          example: SecureP@ssw0rd!
        firstName:
          type: string
          minLength: 1
          maxLength: 100
          description: User first name
          example: John
        lastName:
          type: string
          minLength: 1
          maxLength: 100
          description: User last name
          example: Doe
        firmName:
          type: string
          minLength: 1
          maxLength: 255
          description: Law firm name
          example: Doe & Associates LLP

    LoginRequest:
      type: object
      required:
        - email
        - password
        - firmId
      properties:
        email:
          type: string
          format: email
          description: User email address
          example: john.doe@lawfirm.com
        password:
          type: string
          format: password
          description: User password
          example: SecureP@ssw0rd!
        firmId:
          type: string
          format: uuid
          description: Firm ID (users can belong to multiple firms)
          example: 123e4567-e89b-12d3-a456-426614174000

    AuthTokens:
      type: object
      required:
        - accessToken
        - refreshToken
        - expiresIn
      properties:
        accessToken:
          type: string
          description: JWT access token (1 hour expiry)
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        refreshToken:
          type: string
          description: Refresh token (30 day expiry)
          example: 550e8400-e29b-41d4-a716-446655440000
        expiresIn:
          type: integer
          description: Access token expiry time in seconds
          example: 3600
        tokenType:
          type: string
          description: Token type
          example: Bearer
          default: Bearer

    RegisterResponse:
      allOf:
        - $ref: '#/components/schemas/AuthTokens'
        - type: object
          required:
            - user
            - firm
          properties:
            user:
              $ref: '#/components/schemas/UserProfile'
            firm:
              $ref: '#/components/schemas/FirmProfile'

    LoginResponse:
      allOf:
        - $ref: '#/components/schemas/AuthTokens'
        - type: object
          required:
            - user
          properties:
            user:
              $ref: '#/components/schemas/UserProfile'

    RefreshTokenRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string
          description: Refresh token obtained from login
          example: 550e8400-e29b-41d4-a716-446655440000

    LogoutRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string
          description: Refresh token to invalidate
          example: 550e8400-e29b-41d4-a716-446655440000

    ForgotPasswordRequest:
      type: object
      required:
        - email
        - firmId
      properties:
        email:
          type: string
          format: email
          description: User email address
          example: john.doe@lawfirm.com
        firmId:
          type: string
          format: uuid
          description: Firm ID
          example: 123e4567-e89b-12d3-a456-426614174000

    ResetPasswordRequest:
      type: object
      required:
        - token
        - newPassword
      properties:
        token:
          type: string
          description: Password reset token from email
          example: 7c9e6679-7425-40de-944b-e07fc1f90ae7
        newPassword:
          type: string
          format: password
          minLength: 12
          description: New password (min 12 characters, must include uppercase, lowercase, number, and special character)
          example: NewSecureP@ssw0rd!

    UserProfile:
      type: object
      required:
        - id
        - email
        - firstName
        - lastName
        - role
        - firmId
        - isActive
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          description: User ID
          example: 7c9e6679-7425-40de-944b-e07fc1f90ae7
        email:
          type: string
          format: email
          description: User email
          example: john.doe@lawfirm.com
        firstName:
          type: string
          description: First name
          example: John
        lastName:
          type: string
          description: Last name
          example: Doe
        role:
          type: string
          enum: [admin, attorney, paralegal]
          description: User role
          example: attorney
        firmId:
          type: string
          format: uuid
          description: Firm ID
          example: 123e4567-e89b-12d3-a456-426614174000
        isActive:
          type: boolean
          description: Whether user account is active
          example: true
        createdAt:
          type: string
          format: date-time
          description: Account creation timestamp
          example: 2024-01-15T10:30:00Z
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
          example: 2024-01-15T10:30:00Z

    FirmProfile:
      type: object
      required:
        - id
        - name
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          description: Firm ID
          example: 123e4567-e89b-12d3-a456-426614174000
        name:
          type: string
          description: Firm name
          example: Doe & Associates LLP
        settings:
          type: object
          description: Firm-specific settings
          additionalProperties: true
        createdAt:
          type: string
          format: date-time
          description: Firm creation timestamp
          example: 2024-01-01T00:00:00Z
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
          example: 2024-01-15T10:30:00Z
